Categories:
  - Cloud Storage & File Sync
  - Internet
License: GPL-3.0-only
AuthorName: Andrew Gunnerson
SourceCode: https://github.com/chenxiaolong/RSAF
IssueTracker: https://github.com/chenxiaolong/RSAF/issues
Changelog: https://github.com/chenxiaolong/RSAF/blob/HEAD/CHANGELOG.md

RepoType: git
Repo: https://github.com/chenxiaolong/RSAF.git
Binaries: https://github.com/chenxiaolong/RSAF/releases/download/v%v/RSAF-%v-arm64-v8a-release.apk

Builds:
  - versionName: '3.17'
    versionCode: 200960
    commit: 8a6ca86b7d8f5d8f026e052c0654e2709504a4ea
    subdir: app
    sudo:
      - echo "deb https://deb.debian.org/debian trixie main" > /etc/apt/sources.list.d/trixie.list
      - apt-get update
      - apt-get install -t bookworm-backports -y golang-go
      - apt-get install -y -t trixie openjdk-21-jdk-headless
      - update-alternatives --auto java
    gradle:
      - yes
    srclibs:
      - go@go1.25.1
    prebuild:
      - sdkmanager "platforms;android-35" "build-tools;35.0.0"
      - export GO_VERSION=$(sed -n 's/toolchain \(go.*\)/\1/p' ../rcbridge/go.mod)
      - '[[ $GO_VERSION ]]'
      - git -C $$go$$ checkout -f $GO_VERSION
      - sed -i -e 's|-target=android|-target=android/arm64|' -e 's/include(.*)/include("arm64-v8a")/'
        -e '/GOTOOLCHAIN/d' build.gradle.kts
    build:
      - pushd $$go$$/src
      - ./make.bash
      - popd
      - export GOROOT=$$go$$
      - export GOPATH="$HOME/go"
      - export PATH="$GOROOT/bin:$GOPATH/bin:$PATH"
      - gradle rcbridge
    ndk: r28c

AllowedAPKSigningKeys: b2506499bea1c5a6e658f07be6773fe486999dc124204c6522af7407503ac9f9

AutoUpdateMode: Version
UpdateCheckMode: Tags
UpdateCheckData: metadata/version.txt|(\d+)||v([\d.])
CurrentVersion: '3.17'
CurrentVersionCode: 200960
